---
title: "AEME Inputs"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{AEME Inputs}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  markdown: 
    wrap: 80
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
library(AEME)

tmpdir <- tempdir()
aeme_dir <- system.file("extdata/lake/", package = "AEME")
# Copy files from package into tempdir
file.copy(aeme_dir, tmpdir, recursive = TRUE)
path <- file.path(tmpdir, "lake")
aeme <- yaml_to_aeme(path = path, file = "aeme.yaml")

utils::data("key_naming", package = "AEME")

met_vars <- key_naming |> 
  dplyr::filter(grepl("MET", name)) |> 
  dplyr::select(name_text, name, units) |> 
  dplyr::rename(Name = name_text, Variable = name, Units = units) |> 
  dplyr::mutate(
    Required = dplyr::case_when(
      Variable %in% c("MET_radswd", "MET_tmpair", "MET_wndspd", "MET_pprain") ~ "Yes",
      Variable %in% c("MET_tmpdew", "MET_humrel", "MET_prvapr") ~ "One of the three",
      .default = "Can be derived" 
    )
  ) |> 
  dplyr::arrange(dplyr::desc(Required))

```

## Summary

Inputs for AEME are designed to similar to most standard data inputs used in
lake ecosystem modelling. 

## Lake

Lake inputs include:

## Meteorological Data

Meteorological data inputs include:

```{r}
DT::datatable(met_vars, rownames = FALSE)
```



## Parameters

Being able to specify the parameters of the model is crucial for the
simulation. Parameters can be stored in a data frame within the `aeme` object.
The parameters in this data frame are used to update the model configuration
files and/or update the meteorological data (e.g. scaling wind factor) and/or
update the inflow/outflow data (e.g. scaling inflow factor). 

```{r}
utils::data("aeme_parameters")
aeme_parameters
```

```{r}
parameters(aeme) <- aeme_parameters
```



